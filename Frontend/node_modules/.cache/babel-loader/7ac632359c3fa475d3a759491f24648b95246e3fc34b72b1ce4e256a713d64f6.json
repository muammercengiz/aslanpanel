{"ast":null,"code":"import React,{useEffect,useState}from\"react\";import{useNavigate}from\"react-router-dom\";import{getPersoneller,deletePersonel}from\"../api\";// api.js'den\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function Personel(){const[personeller,setPersoneller]=useState([]);const navigate=useNavigate();const role=localStorage.getItem(\"role\");useEffect(()=>{getPersoneller().then(res=>{const aktifPersoneller=res.data.filter(p=>p.durum!==\"İşten Ayrıldı\");setPersoneller(aktifPersoneller);}).catch(err=>console.error(\"Personel verisi alınamadı:\",err));},[]);const handleDelete=async id=>{if(window.confirm(\"Bu personel kaydı silinsin mi?\")){try{await deletePersonel(id);setPersoneller(prev=>prev.filter(item=>item.id!==id));}catch(err){console.error(\"Silme hatası:\",err);alert(\"Silme işlemi başarısız\");}}};return/*#__PURE__*/_jsxs(\"div\",{className:\"p-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between mb-4\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold\",children:\"Aktif Personel Listesi\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-x-2\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>navigate(\"/personel-arsiv\"),className:\"bg-gray-700 text-white px-4 py-2 rounded\",children:\"Ar\\u015Fiv\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>navigate(\"/personel-takip\"),className:\"bg-purple-600 text-white px-4 py-2 rounded\",children:\"Personel Takip\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>navigate(\"/personel-ekle\"),className:\"bg-blue-600 text-white px-4 py-2 rounded\",children:\"Yeni Personel Ekle\"})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"overflow-x-auto bg-white rounded shadow\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"w-full text-left border-collapse\",children:[/*#__PURE__*/_jsx(\"thead\",{className:\"bg-gray-100 text-gray-700\",children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{className:\"p-3\",children:\"#\"}),/*#__PURE__*/_jsx(\"th\",{className:\"p-3\",children:\"Ad Soyad\"}),/*#__PURE__*/_jsx(\"th\",{className:\"p-3\",children:\"G\\xF6rev\"}),/*#__PURE__*/_jsx(\"th\",{className:\"p-3\",children:\"Durum\"}),/*#__PURE__*/_jsx(\"th\",{className:\"p-3\",children:\"Telefon\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-4 py-2\",children:\"\\u0130zin Hakk\\u0131\"}),role===\"admin\"&&/*#__PURE__*/_jsx(\"th\",{className:\"p-3\",children:\"Maa\\u015F\"}),/*#__PURE__*/_jsx(\"th\",{className:\"p-3\",children:\"\\u0130\\u015Flemler\"})]})}),/*#__PURE__*/_jsxs(\"tbody\",{children:[personeller.map((item,index)=>/*#__PURE__*/_jsxs(\"tr\",{className:\"border-t hover:bg-gray-50\",children:[/*#__PURE__*/_jsx(\"td\",{className:\"p-3\",children:index+1}),/*#__PURE__*/_jsxs(\"td\",{className:\"p-3\",children:[item.ad,\" \",item.soyad]}),/*#__PURE__*/_jsx(\"td\",{className:\"p-3\",children:item.gorev}),/*#__PURE__*/_jsx(\"td\",{className:\"p-3\",children:item.durum}),/*#__PURE__*/_jsx(\"td\",{className:\"p-3\",children:item.telefon}),/*#__PURE__*/_jsxs(\"td\",{className:\"p-3\",children:[item.izin_hakki,\" g\\xFCn\"]}),role===\"admin\"&&/*#__PURE__*/_jsx(\"td\",{className:\"p-3\",children:item.maas?\"\".concat(item.maas,\" \\u20BA\"):\"-\"}),/*#__PURE__*/_jsxs(\"td\",{className:\"p-3 space-x-2\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>navigate(\"/personel-izin/\".concat(item.id)),className:\"bg-green-500 text-white px-3 py-1 rounded hover:bg-green-600\",children:\"\\u0130zin\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>navigate(\"/personel-mesai/\".concat(item.id)),className:\"bg-green-500 text-white px-3 py-1 rounded hover:bg-green-600\",children:\"Mesai\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>navigate(\"/personel-guncelle/\".concat(item.id)),className:\"bg-yellow-500 text-white px-3 py-1 rounded hover:bg-yellow-600\",children:\"G\\xFCncelle\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleDelete(item.id),className:\"bg-red-500 text-white px-3 py-1 rounded hover:bg-red-600\",children:\"Sil\"})]})]},item.id)),personeller.length===0&&/*#__PURE__*/_jsx(\"tr\",{children:/*#__PURE__*/_jsx(\"td\",{colSpan:\"6\",className:\"p-4 text-center text-gray-500\",children:\"Kay\\u0131t bulunamad\\u0131.\"})})]})]})})]});}export default Personel;","map":{"version":3,"names":["React","useEffect","useState","useNavigate","getPersoneller","deletePersonel","jsx","_jsx","jsxs","_jsxs","Personel","personeller","setPersoneller","navigate","role","localStorage","getItem","then","res","aktifPersoneller","data","filter","p","durum","catch","err","console","error","handleDelete","id","window","confirm","prev","item","alert","className","children","onClick","map","index","ad","soyad","gorev","telefon","izin_hakki","maas","concat","length","colSpan"],"sources":["C:/Users/Muammer/Desktop/aslanpanel/Frontend/src/pages/Personel.jsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport { getPersoneller, deletePersonel } from \"../api\"; // api.js'den\r\n\r\nfunction Personel() {\r\n  const [personeller, setPersoneller] = useState([]);\r\n  const navigate = useNavigate();\r\n  const role = localStorage.getItem(\"role\");\r\n\r\nuseEffect(() => {\r\n  getPersoneller()\r\n    .then((res) => {\r\n      const aktifPersoneller = res.data.filter(\r\n        (p) => p.durum !== \"İşten Ayrıldı\"\r\n      );\r\n      setPersoneller(aktifPersoneller);\r\n    })\r\n    .catch((err) => console.error(\"Personel verisi alınamadı:\", err));\r\n}, []);\r\n\r\n  const handleDelete = async (id) => {\r\n    if (window.confirm(\"Bu personel kaydı silinsin mi?\")) {\r\n      try {\r\n        await deletePersonel(id);\r\n        setPersoneller((prev) => prev.filter((item) => item.id !== id));\r\n      } catch (err) {\r\n        console.error(\"Silme hatası:\", err);\r\n        alert(\"Silme işlemi başarısız\");\r\n      }\r\n    }\r\n  };\r\n\r\n\r\n  return (\r\n    <div className=\"p-6\">\r\n      <div className=\"flex items-center justify-between mb-4\">\r\n        <h2 className=\"text-2xl font-bold\">Aktif Personel Listesi</h2>\r\n        <div className=\"space-x-2\">\r\n          <button\r\n            onClick={() => navigate(\"/personel-arsiv\")}\r\n            className=\"bg-gray-700 text-white px-4 py-2 rounded\"\r\n          >\r\n            Arşiv\r\n          </button>\r\n          <button\r\n            onClick={() => navigate(\"/personel-takip\")}\r\n            className=\"bg-purple-600 text-white px-4 py-2 rounded\"\r\n          >\r\n            Personel Takip\r\n          </button>\r\n          <button\r\n            onClick={() => navigate(\"/personel-ekle\")}\r\n            className=\"bg-blue-600 text-white px-4 py-2 rounded\"\r\n          >\r\n            Yeni Personel Ekle\r\n          </button>\r\n        </div>\r\n      </div>\r\n      <div className=\"overflow-x-auto bg-white rounded shadow\">\r\n        <table className=\"w-full text-left border-collapse\">\r\n          <thead className=\"bg-gray-100 text-gray-700\">\r\n            <tr>\r\n              <th className=\"p-3\">#</th>\r\n              <th className=\"p-3\">Ad Soyad</th>\r\n              <th className=\"p-3\">Görev</th>\r\n              <th className=\"p-3\">Durum</th>\r\n              <th className=\"p-3\">Telefon</th>\r\n              <th className=\"px-4 py-2\">İzin Hakkı</th>\r\n              {(role === \"admin\") && <th className=\"p-3\">Maaş</th>}\r\n              <th className=\"p-3\">İşlemler</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            {personeller.map((item, index) => (\r\n              <tr key={item.id} className=\"border-t hover:bg-gray-50\">\r\n                <td className=\"p-3\">{index + 1}</td>\r\n                <td className=\"p-3\">{item.ad} {item.soyad}</td>\r\n                <td className=\"p-3\">{item.gorev}</td>\r\n                <td className=\"p-3\">{item.durum}</td>\r\n                <td className=\"p-3\">{item.telefon}</td>\r\n                <td className=\"p-3\">{item.izin_hakki} gün</td>\r\n                {(role === \"admin\") && (\r\n                  <td className=\"p-3\">\r\n                  {item.maas ? `${item.maas} ₺` : \"-\"}\r\n                </td>\r\n                )}\r\n                <td className=\"p-3 space-x-2\">\r\n                  <button\r\n                    onClick={() => navigate(`/personel-izin/${item.id}`)}\r\n                    className=\"bg-green-500 text-white px-3 py-1 rounded hover:bg-green-600\"\r\n                  >\r\n                    İzin\r\n                  </button>\r\n                  <button\r\n                    onClick={() => navigate(`/personel-mesai/${item.id}`)}\r\n                    className=\"bg-green-500 text-white px-3 py-1 rounded hover:bg-green-600\"\r\n                  >\r\n                    Mesai\r\n                  </button>\r\n                  <button\r\n                    onClick={() => navigate(`/personel-guncelle/${item.id}`)}\r\n                    className=\"bg-yellow-500 text-white px-3 py-1 rounded hover:bg-yellow-600\"\r\n                  >\r\n                    Güncelle\r\n                  </button>\r\n                  <button\r\n                    onClick={() => handleDelete(item.id)}\r\n                    className=\"bg-red-500 text-white px-3 py-1 rounded hover:bg-red-600\"\r\n                  >\r\n                    Sil\r\n                  </button>\r\n                </td>\r\n              </tr>\r\n            ))}\r\n            {personeller.length === 0 && (\r\n              <tr>\r\n                <td colSpan=\"6\" className=\"p-4 text-center text-gray-500\">\r\n                  Kayıt bulunamadı.\r\n                </td>\r\n              </tr>\r\n            )}\r\n          </tbody>\r\n        </table>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Personel;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}