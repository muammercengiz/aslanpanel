{"ast":null,"code":"import _objectSpread from\"C:/Users/Muammer/Desktop/aslanpanel/Frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useEffect,useState}from\"react\";import{getArsivPersoneller,iseGeriAl,updatePersonel}from\"../api\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function PersonelArsiv(){const[arsivPersoneller,setArsivPersoneller]=useState([]);const handleIseGeriAl=personel=>{if(window.confirm(\"Bu personel tekrar aktif edilsin mi?\")){const yeniVeri=_objectSpread(_objectSpread({},personel),{},{durum:\"Aktif\",ayrilma_tarihi:null,ayrilma_sebebi:\"\"});updatePersonel(personel.id,yeniVeri).then(()=>{alert(\"İşlem başarılı\");setArsivPersoneller(prev=>prev.filter(p=>p.id!==personel.id));}).catch(err=>{console.error(\"İşe geri alma hatası:\",err);alert(\"İşlem başarısız\");});}};useEffect(()=>{getArsivPersoneller().then(res=>{console.log(\"Arşiv verisi gelen:\",res.data);setArsivPersoneller(res.data);}).catch(err=>console.error(\"Arşiv verisi alınamadı:\",err));},[]);return/*#__PURE__*/_jsxs(\"div\",{className:\"p-6\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold mb-4\",children:\"Ar\\u015Fivdeki Personeller\"}),/*#__PURE__*/_jsx(\"div\",{className:\"overflow-x-auto bg-white rounded shadow\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"w-full text-left border-collapse\",children:[/*#__PURE__*/_jsx(\"thead\",{className:\"bg-gray-100 text-gray-700\",children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{className:\"p-3\",children:\"#\"}),/*#__PURE__*/_jsx(\"th\",{className:\"p-3\",children:\"Ad Soyad\"}),/*#__PURE__*/_jsx(\"th\",{className:\"p-3\",children:\"T.C. Kimlik No\"}),/*#__PURE__*/_jsx(\"th\",{className:\"p-3\",children:\"G\\xF6rev\"}),/*#__PURE__*/_jsx(\"th\",{className:\"p-3\",children:\"\\u0130\\u015Fe Ba\\u015Flama\"}),/*#__PURE__*/_jsx(\"th\",{className:\"p-3\",children:\"Durum\"}),/*#__PURE__*/_jsx(\"th\",{className:\"p-3\",children:\"Ayr\\u0131lma Tarihi\"}),/*#__PURE__*/_jsx(\"th\",{className:\"p-3\",children:\"Ayr\\u0131lma Sebebi\"}),/*#__PURE__*/_jsx(\"th\",{className:\"p-3\",children:\"\\u0130\\u015Flem\"})]})}),/*#__PURE__*/_jsxs(\"tbody\",{children:[arsivPersoneller.map((p,index)=>{var _p$ise_baslama,_p$ayrilma_tarihi;return/*#__PURE__*/_jsxs(\"tr\",{className:\"border-t hover:bg-gray-50\",children:[/*#__PURE__*/_jsx(\"td\",{className:\"p-3\",children:index+1}),/*#__PURE__*/_jsxs(\"td\",{className:\"p-3\",children:[p.ad,\" \",p.soyad]}),/*#__PURE__*/_jsx(\"td\",{className:\"p-3\",children:p.tc}),/*#__PURE__*/_jsx(\"td\",{className:\"p-3\",children:p.gorev}),/*#__PURE__*/_jsx(\"td\",{className:\"p-3\",children:(_p$ise_baslama=p.ise_baslama)===null||_p$ise_baslama===void 0?void 0:_p$ise_baslama.slice(0,10)}),/*#__PURE__*/_jsx(\"td\",{className:\"p-3\",children:p.durum}),/*#__PURE__*/_jsx(\"td\",{className:\"p-3\",children:((_p$ayrilma_tarihi=p.ayrilma_tarihi)===null||_p$ayrilma_tarihi===void 0?void 0:_p$ayrilma_tarihi.slice(0,10))||\"-\"}),/*#__PURE__*/_jsx(\"td\",{className:\"p-3\",children:p.ayrilma_sebebi||\"-\"}),/*#__PURE__*/_jsx(\"td\",{className:\"p-3\",children:/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleIseGeriAl(p),className:\"bg-green-600 text-white px-3 py-1 rounded hover:bg-green-700\",children:\"\\u0130\\u015Fe Geri Al\"})})]},p.id);}),arsivPersoneller.length===0&&/*#__PURE__*/_jsx(\"tr\",{children:/*#__PURE__*/_jsx(\"td\",{colSpan:\"8\",className:\"p-4 text-center text-gray-500\",children:\"Ar\\u015Fivde personel bulunamad\\u0131.\"})})]})]})})]});}export default PersonelArsiv;","map":{"version":3,"names":["React","useEffect","useState","getArsivPersoneller","iseGeriAl","updatePersonel","jsx","_jsx","jsxs","_jsxs","PersonelArsiv","arsivPersoneller","setArsivPersoneller","handleIseGeriAl","personel","window","confirm","yeniVeri","_objectSpread","durum","ayrilma_tarihi","ayrilma_sebebi","id","then","alert","prev","filter","p","catch","err","console","error","res","log","data","className","children","map","index","_p$ise_baslama","_p$ayrilma_tarihi","ad","soyad","tc","gorev","ise_baslama","slice","onClick","length","colSpan"],"sources":["C:/Users/Muammer/Desktop/aslanpanel/Frontend/src/pages/PersonelArsiv.jsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport { getArsivPersoneller, iseGeriAl, updatePersonel } from \"../api\";\r\n\r\n\r\nfunction PersonelArsiv() {\r\n  const [arsivPersoneller, setArsivPersoneller] = useState([]);\r\nconst handleIseGeriAl = (personel) => {\r\n  if (window.confirm(\"Bu personel tekrar aktif edilsin mi?\")) {\r\n    const yeniVeri = {\r\n      ...personel,\r\n      durum: \"Aktif\",\r\n      ayrilma_tarihi: null,\r\n      ayrilma_sebebi: \"\"\r\n    };\r\n\r\n\r\n\r\n    updatePersonel(personel.id, yeniVeri)\r\n      .then(() => {\r\n        alert(\"İşlem başarılı\");\r\n        setArsivPersoneller((prev) => prev.filter((p) => p.id !== personel.id));\r\n      })\r\n      .catch((err) => {\r\n        console.error(\"İşe geri alma hatası:\", err);\r\n        alert(\"İşlem başarısız\");\r\n      });\r\n  }\r\n};\r\n\r\n\r\n  useEffect(() => {\r\n    getArsivPersoneller()\r\n      .then((res) => {\r\n        console.log(\"Arşiv verisi gelen:\", res.data);\r\n        setArsivPersoneller(res.data);\r\n      })\r\n      .catch((err) => console.error(\"Arşiv verisi alınamadı:\", err));\r\n  }, []);\r\n\r\n  return (\r\n    <div className=\"p-6\">\r\n      <h2 className=\"text-2xl font-bold mb-4\">Arşivdeki Personeller</h2>\r\n      <div className=\"overflow-x-auto bg-white rounded shadow\">\r\n        <table className=\"w-full text-left border-collapse\">\r\n          <thead className=\"bg-gray-100 text-gray-700\">\r\n            <tr>\r\n              <th className=\"p-3\">#</th>\r\n              <th className=\"p-3\">Ad Soyad</th>\r\n              <th className=\"p-3\">T.C. Kimlik No</th>\r\n              <th className=\"p-3\">Görev</th>\r\n              <th className=\"p-3\">İşe Başlama</th>\r\n              <th className=\"p-3\">Durum</th>\r\n              <th className=\"p-3\">Ayrılma Tarihi</th>\r\n              <th className=\"p-3\">Ayrılma Sebebi</th>\r\n              <th className=\"p-3\">İşlem</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            {arsivPersoneller.map((p, index) => (\r\n              <tr key={p.id} className=\"border-t hover:bg-gray-50\">\r\n                <td className=\"p-3\">{index + 1}</td>\r\n                <td className=\"p-3\">{p.ad} {p.soyad}</td>\r\n                <td className=\"p-3\">{p.tc}</td>\r\n                <td className=\"p-3\">{p.gorev}</td>\r\n                <td className=\"p-3\">{p.ise_baslama?.slice(0, 10)}</td>\r\n                <td className=\"p-3\">{p.durum}</td>\r\n                <td className=\"p-3\">{p.ayrilma_tarihi?.slice(0, 10) || \"-\"}</td>\r\n                <td className=\"p-3\">{p.ayrilma_sebebi || \"-\"}</td>\r\n                <td className=\"p-3\">\r\n                  <button\r\n                    onClick={() => handleIseGeriAl(p)}\r\n                    className=\"bg-green-600 text-white px-3 py-1 rounded hover:bg-green-700\"\r\n                  >\r\n                    İşe Geri Al\r\n                  </button>\r\n                </td>\r\n              </tr>\r\n            ))}\r\n            {arsivPersoneller.length === 0 && (\r\n              <tr>\r\n                <td colSpan=\"8\" className=\"p-4 text-center text-gray-500\">\r\n                  Arşivde personel bulunamadı.\r\n                </td>\r\n              </tr>\r\n            )}\r\n          </tbody>\r\n        </table>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default PersonelArsiv;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}