{"ast":null,"code":"import React,{useEffect,useState}from\"react\";import{useParams}from\"react-router-dom\";import{getPersonelMesaileri,createMesai,deleteMesai}from\"../api\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function PersonelMesai(){const{id}=useParams();const[mesailer,setMesailer]=useState([]);const[tarih,setTarih]=useState(\"\");const[sure,setSure]=useState(\"\");const[aciklama,setAciklama]=useState(\"\");useEffect(()=>{getPersonelMesaileri(id).then(res=>setMesailer(res.data)).catch(err=>console.error(\"Mesai verisi alınamadı:\",err));},[id]);const handleSubmit=async e=>{e.preventDefault();const yeniMesai={personel_id:id,tarih,sure,aciklama};try{const res=await createMesai(yeniMesai);setMesailer([res.data,...mesailer]);setTarih(\"\");setSure(\"\");setAciklama(\"\");}catch(err){console.error(\"Mesai ekleme hatası:\",err);}};const handleDelete=async mesaiId=>{if(window.confirm(\"Bu mesai kaydı silinsin mi?\")){try{await deleteMesai(mesaiId);setMesailer(prev=>prev.filter(m=>m.id!==mesaiId));}catch(err){console.error(\"Mesai silme hatası:\",err);}}};return/*#__PURE__*/_jsxs(\"div\",{className:\"p-6 space-y-6\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold\",children:\"Mesai Ekle\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,className:\"bg-white shadow p-4 rounded grid grid-cols-1 md:grid-cols-4 gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block font-medium mb-1\",children:\"Tarih\"}),/*#__PURE__*/_jsx(\"input\",{type:\"date\",value:tarih,onChange:e=>setTarih(e.target.value),className:\"w-full border px-3 py-2 rounded\",required:true})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block font-medium mb-1\",children:\"S\\xFCre (saat)\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:sure,onChange:e=>setSure(e.target.value),className:\"w-full border px-3 py-2 rounded\",required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"md:col-span-2\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"block font-medium mb-1\",children:\"A\\xE7\\u0131klama\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:aciklama,onChange:e=>setAciklama(e.target.value),className:\"w-full border px-3 py-2 rounded\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"md:col-span-4 text-right\",children:/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"bg-green-600 text-white px-6 py-2 rounded hover:bg-green-700\",children:\"Kaydet\"})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"overflow-x-auto bg-white rounded shadow\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"w-full text-left border-collapse\",children:[/*#__PURE__*/_jsx(\"thead\",{className:\"bg-gray-100 text-gray-700\",children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{className:\"p-3\",children:\"#\"}),/*#__PURE__*/_jsx(\"th\",{className:\"p-3\",children:\"Tarih\"}),/*#__PURE__*/_jsx(\"th\",{className:\"p-3\",children:\"S\\xFCre\"}),/*#__PURE__*/_jsx(\"th\",{className:\"p-3\",children:\"A\\xE7\\u0131klama\"}),/*#__PURE__*/_jsx(\"th\",{className:\"p-3\",children:\"Sil\"})]})}),/*#__PURE__*/_jsxs(\"tbody\",{children:[mesailer.map((item,index)=>/*#__PURE__*/_jsxs(\"tr\",{className:\"border-t hover:bg-gray-50\",children:[/*#__PURE__*/_jsx(\"td\",{className:\"p-3\",children:index+1}),/*#__PURE__*/_jsx(\"td\",{className:\"p-3\",children:new Date(item.tarih).toLocaleDateString(\"tr-TR\")}),/*#__PURE__*/_jsx(\"td\",{className:\"p-3\",children:item.sure}),/*#__PURE__*/_jsx(\"td\",{className:\"p-3\",children:item.aciklama}),/*#__PURE__*/_jsx(\"td\",{className:\"p-3\",children:/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleDelete(item.id),className:\"bg-red-500 text-white px-3 py-1 rounded hover:bg-red-600\",children:\"Sil\"})})]},item.id)),mesailer.length===0&&/*#__PURE__*/_jsx(\"tr\",{children:/*#__PURE__*/_jsx(\"td\",{colSpan:\"5\",className:\"p-4 text-center text-gray-500\",children:\"Kay\\u0131t bulunamad\\u0131.\"})})]})]})})]});}export default PersonelMesai;","map":{"version":3,"names":["React","useEffect","useState","useParams","getPersonelMesaileri","createMesai","deleteMesai","jsx","_jsx","jsxs","_jsxs","PersonelMesai","id","mesailer","setMesailer","tarih","setTarih","sure","setSure","aciklama","setAciklama","then","res","data","catch","err","console","error","handleSubmit","e","preventDefault","yeniMesai","personel_id","handleDelete","mesaiId","window","confirm","prev","filter","m","className","children","onSubmit","type","value","onChange","target","required","map","item","index","Date","toLocaleDateString","onClick","length","colSpan"],"sources":["C:/Users/Muammer/Desktop/aslanpanel/Frontend/src/pages/PersonelMesai.jsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport { getPersonelMesaileri, createMesai, deleteMesai } from \"../api\";\r\n\r\nfunction PersonelMesai() {\r\n  const { id } = useParams();\r\n  const [mesailer, setMesailer] = useState([]);\r\n  const [tarih, setTarih] = useState(\"\");\r\n  const [sure, setSure] = useState(\"\");\r\n  const [aciklama, setAciklama] = useState(\"\");\r\n\r\n  useEffect(() => {\r\n    getPersonelMesaileri(id)\r\n      .then((res) => setMesailer(res.data))\r\n      .catch((err) => console.error(\"Mesai verisi alınamadı:\", err));\r\n  }, [id]);\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    const yeniMesai = { personel_id: id, tarih, sure, aciklama };\r\n\r\n    try {\r\n      const res = await createMesai(yeniMesai);\r\n      setMesailer([res.data, ...mesailer]);\r\n      setTarih(\"\");\r\n      setSure(\"\");\r\n      setAciklama(\"\");\r\n    } catch (err) {\r\n      console.error(\"Mesai ekleme hatası:\", err);\r\n    }\r\n  };\r\n\r\n  const handleDelete = async (mesaiId) => {\r\n    if (window.confirm(\"Bu mesai kaydı silinsin mi?\")) {\r\n      try {\r\n        await deleteMesai(mesaiId);\r\n        setMesailer((prev) => prev.filter((m) => m.id !== mesaiId));\r\n      } catch (err) {\r\n        console.error(\"Mesai silme hatası:\", err);\r\n      }\r\n    }\r\n  };\r\n\r\n\r\n  return (\r\n    <div className=\"p-6 space-y-6\">\r\n      <h2 className=\"text-2xl font-bold\">Mesai Ekle</h2>\r\n      <form\r\n        onSubmit={handleSubmit}\r\n        className=\"bg-white shadow p-4 rounded grid grid-cols-1 md:grid-cols-4 gap-4\"\r\n      >\r\n        <div>\r\n          <label className=\"block font-medium mb-1\">Tarih</label>\r\n          <input\r\n            type=\"date\"\r\n            value={tarih}\r\n            onChange={(e) => setTarih(e.target.value)}\r\n            className=\"w-full border px-3 py-2 rounded\"\r\n            required\r\n          />\r\n        </div>\r\n        <div>\r\n          <label className=\"block font-medium mb-1\">Süre (saat)</label>\r\n          <input\r\n            type=\"number\"\r\n            value={sure}\r\n            onChange={(e) => setSure(e.target.value)}\r\n            className=\"w-full border px-3 py-2 rounded\"\r\n            required\r\n          />\r\n        </div>\r\n        <div className=\"md:col-span-2\">\r\n          <label className=\"block font-medium mb-1\">Açıklama</label>\r\n          <input\r\n            type=\"text\"\r\n            value={aciklama}\r\n            onChange={(e) => setAciklama(e.target.value)}\r\n            className=\"w-full border px-3 py-2 rounded\"\r\n          />\r\n        </div>\r\n        <div className=\"md:col-span-4 text-right\">\r\n          <button\r\n            type=\"submit\"\r\n            className=\"bg-green-600 text-white px-6 py-2 rounded hover:bg-green-700\"\r\n          >\r\n            Kaydet\r\n          </button>\r\n        </div>\r\n      </form>\r\n\r\n      <div className=\"overflow-x-auto bg-white rounded shadow\">\r\n        <table className=\"w-full text-left border-collapse\">\r\n          <thead className=\"bg-gray-100 text-gray-700\">\r\n            <tr>\r\n              <th className=\"p-3\">#</th>\r\n              <th className=\"p-3\">Tarih</th>\r\n              <th className=\"p-3\">Süre</th>\r\n              <th className=\"p-3\">Açıklama</th>\r\n              <th className=\"p-3\">Sil</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            {mesailer.map((item, index) => (\r\n              <tr key={item.id} className=\"border-t hover:bg-gray-50\">\r\n                <td className=\"p-3\">{index + 1}</td>\r\n                <td className=\"p-3\">\r\n                {new Date(item.tarih).toLocaleDateString(\"tr-TR\")}\r\n                </td>\r\n                <td className=\"p-3\">{item.sure}</td>\r\n                <td className=\"p-3\">{item.aciklama}</td>\r\n                <td className=\"p-3\">\r\n                  <button\r\n                    onClick={() => handleDelete(item.id)}\r\n                    className=\"bg-red-500 text-white px-3 py-1 rounded hover:bg-red-600\"\r\n                  >\r\n                    Sil\r\n                  </button>\r\n                </td>\r\n              </tr>\r\n            ))}\r\n            {mesailer.length === 0 && (\r\n              <tr>\r\n                <td colSpan=\"5\" className=\"p-4 text-center text-gray-500\">\r\n                  Kayıt bulunamadı.\r\n                </td>\r\n              </tr>\r\n            )}\r\n          </tbody>\r\n        </table>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default PersonelMesai;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}