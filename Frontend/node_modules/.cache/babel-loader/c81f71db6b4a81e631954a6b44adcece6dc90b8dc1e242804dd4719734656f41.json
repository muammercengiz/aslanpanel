{"ast":null,"code":"import _objectSpread from\"C:/Users/Muammer/Desktop/aslanpanel/Frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useEffect,useState}from\"react\";import{useParams,useNavigate}from\"react-router-dom\";import{hareketKaydet}from\"../utils/hareket\";import{getKullaniciById,updateKullanici}from\"../api\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function KullaniciDetay(){const{id}=useParams();const navigate=useNavigate();const[form,setForm]=useState({ad:\"\",soyad:\"\",email:\"\",telefon:\"\",kullanici_adi:\"\",sifre:\"\",rol:\"\"});// Kullanıcı bilgilerini getirme\nuseEffect(()=>{getKullaniciById(id).then(res=>setForm(_objectSpread(_objectSpread({},res.data),{},{sifre:\"\"})))// ✔️ res.data ile al\n.catch(err=>console.error(\"Veri alınamadı:\",err));},[id]);const handleChange=e=>{setForm(_objectSpread(_objectSpread({},form),{},{[e.target.name]:e.target.value}));};const handleSubmit=async e=>{e.preventDefault();const guncellemeVerisi=_objectSpread({},form);if(!guncellemeVerisi.sifre){delete guncellemeVerisi.sifre;}try{await updateKullanici(id,guncellemeVerisi);const yapan=localStorage.getItem(\"isim\");await hareketKaydet(\"Kullanıcı Güncelleme\",\"\".concat(yapan,\", \").concat(guncellemeVerisi.ad,\" \").concat(guncellemeVerisi.soyad,\" adl\\u0131 kullan\\u0131c\\u0131y\\u0131 g\\xFCncelledi\"));alert(\"Kullanıcı güncellendi\");navigate(\"/kullanicilar\");}catch(err){console.error(\"Güncelleme hatası:\",err);alert(\"Güncelleme başarısız\");}};return/*#__PURE__*/_jsxs(\"div\",{className:\"p-6 w-full max-w-2xl mx-auto\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold mb-4\",children:\"Kullan\\u0131c\\u0131 G\\xFCncelle\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,className:\"space-y-4\",children:[/*#__PURE__*/_jsx(\"input\",{name:\"ad\",value:form.ad,onChange:handleChange,placeholder:\"Ad\",className:\"w-full p-2 border\",required:true}),/*#__PURE__*/_jsx(\"input\",{name:\"soyad\",value:form.soyad,onChange:handleChange,placeholder:\"Soyad\",className:\"w-full p-2 border\",required:true}),/*#__PURE__*/_jsx(\"input\",{name:\"email\",value:form.email,onChange:handleChange,placeholder:\"Email\",className:\"w-full p-2 border\",required:true}),/*#__PURE__*/_jsx(\"input\",{name:\"telefon\",value:form.telefon,onChange:handleChange,placeholder:\"Telefon\",className:\"w-full p-2 border\",required:true}),/*#__PURE__*/_jsx(\"input\",{name:\"kullanici_adi\",value:form.kullanici_adi,onChange:handleChange,placeholder:\"Kullan\\u0131c\\u0131 Ad\\u0131\",className:\"w-full p-2 border\",required:true}),/*#__PURE__*/_jsx(\"input\",{name:\"sifre\",value:form.sifre,onChange:handleChange,placeholder:\"Yeni \\u015Eifre (bo\\u015F b\\u0131rak\\u0131l\\u0131rsa de\\u011Fi\\u015Fmez)\",className:\"w-full p-2 border\"}),/*#__PURE__*/_jsxs(\"select\",{name:\"rol\",value:form.rol,onChange:handleChange,className:\"w-full p-2 border\",required:true,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Rol Se\\xE7in\"}),/*#__PURE__*/_jsx(\"option\",{value:\"admin\",children:\"Admin\"}),/*#__PURE__*/_jsx(\"option\",{value:\"y\\xF6netici\",children:\"Y\\xF6netici\"}),/*#__PURE__*/_jsx(\"option\",{value:\"operat\\xF6r\",children:\"Operat\\xF6r\"})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"bg-blue-600 text-white px-4 py-2 rounded\",children:\"G\\xFCncelle\"})]})]});}export default KullaniciDetay;","map":{"version":3,"names":["React","useEffect","useState","useParams","useNavigate","hareketKaydet","getKullaniciById","updateKullanici","jsx","_jsx","jsxs","_jsxs","KullaniciDetay","id","navigate","form","setForm","ad","soyad","email","telefon","kullanici_adi","sifre","rol","then","res","_objectSpread","data","catch","err","console","error","handleChange","e","target","name","value","handleSubmit","preventDefault","guncellemeVerisi","yapan","localStorage","getItem","concat","alert","className","children","onSubmit","onChange","placeholder","required","type"],"sources":["C:/Users/Muammer/Desktop/aslanpanel/Frontend/src/pages/KullaniciDetay.jsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport { useParams, useNavigate } from \"react-router-dom\";\r\nimport { hareketKaydet } from \"../utils/hareket\";\r\nimport { getKullaniciById, updateKullanici } from \"../api\";\r\n\r\nfunction KullaniciDetay() {\r\n  const { id } = useParams();\r\n  const navigate = useNavigate();\r\n  const [form, setForm] = useState({\r\n    ad: \"\",\r\n    soyad: \"\",\r\n    email: \"\",\r\n    telefon: \"\",\r\n    kullanici_adi: \"\",\r\n    sifre: \"\",\r\n    rol: \"\",\r\n  });\r\n\r\n  // Kullanıcı bilgilerini getirme\r\n useEffect(() => {\r\n  getKullaniciById(id)\r\n    .then((res) => setForm({ ...res.data, sifre: \"\" }))  // ✔️ res.data ile al\r\n    .catch((err) => console.error(\"Veri alınamadı:\", err));\r\n}, [id]);\r\n\r\n  const handleChange = (e) => {\r\n    setForm({ ...form, [e.target.name]: e.target.value });\r\n  };\r\n\r\n\r\nconst handleSubmit = async (e) => {\r\n  e.preventDefault();\r\n  const guncellemeVerisi = { ...form };\r\n  if (!guncellemeVerisi.sifre) {\r\n    delete guncellemeVerisi.sifre;\r\n  }\r\n\r\n  try {\r\n    await updateKullanici(id, guncellemeVerisi);\r\n\r\n    const yapan = localStorage.getItem(\"isim\");\r\n    await hareketKaydet(\r\n      \"Kullanıcı Güncelleme\",\r\n      `${yapan}, ${guncellemeVerisi.ad} ${guncellemeVerisi.soyad} adlı kullanıcıyı güncelledi`\r\n    );\r\n\r\n    alert(\"Kullanıcı güncellendi\");\r\n    navigate(\"/kullanicilar\");\r\n  } catch (err) {\r\n    console.error(\"Güncelleme hatası:\", err);\r\n    alert(\"Güncelleme başarısız\");\r\n  }\r\n};\r\n\r\n\r\n  return (\r\n    <div className=\"p-6 w-full max-w-2xl mx-auto\">\r\n      <h2 className=\"text-2xl font-bold mb-4\">Kullanıcı Güncelle</h2>\r\n      <form onSubmit={handleSubmit} className=\"space-y-4\">\r\n        <input\r\n          name=\"ad\"\r\n          value={form.ad}\r\n          onChange={handleChange}\r\n          placeholder=\"Ad\"\r\n          className=\"w-full p-2 border\"\r\n          required\r\n        />\r\n        <input\r\n          name=\"soyad\"\r\n          value={form.soyad}\r\n          onChange={handleChange}\r\n          placeholder=\"Soyad\"\r\n          className=\"w-full p-2 border\"\r\n          required\r\n        />\r\n        <input\r\n          name=\"email\"\r\n          value={form.email}\r\n          onChange={handleChange}\r\n          placeholder=\"Email\"\r\n          className=\"w-full p-2 border\"\r\n          required\r\n        />\r\n        <input\r\n          name=\"telefon\"\r\n          value={form.telefon}\r\n          onChange={handleChange}\r\n          placeholder=\"Telefon\"\r\n          className=\"w-full p-2 border\"\r\n          required\r\n        />\r\n        <input\r\n          name=\"kullanici_adi\"\r\n          value={form.kullanici_adi}\r\n          onChange={handleChange}\r\n          placeholder=\"Kullanıcı Adı\"\r\n          className=\"w-full p-2 border\"\r\n          required\r\n        />\r\n        <input\r\n          name=\"sifre\"\r\n          value={form.sifre}\r\n          onChange={handleChange}\r\n          placeholder=\"Yeni Şifre (boş bırakılırsa değişmez)\"\r\n          className=\"w-full p-2 border\"\r\n        />\r\n        <select\r\n          name=\"rol\"\r\n          value={form.rol}\r\n          onChange={handleChange}\r\n          className=\"w-full p-2 border\"\r\n          required\r\n        >\r\n          <option value=\"\">Rol Seçin</option>\r\n          <option value=\"admin\">Admin</option>\r\n          <option value=\"yönetici\">Yönetici</option>\r\n          <option value=\"operatör\">Operatör</option>\r\n        </select>\r\n        <button\r\n          type=\"submit\"\r\n          className=\"bg-blue-600 text-white px-4 py-2 rounded\"\r\n        >\r\n          Güncelle\r\n        </button>\r\n      </form>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default KullaniciDetay;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}